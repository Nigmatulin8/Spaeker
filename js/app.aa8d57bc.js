(function(t){function e(e){for(var o,s,c=e[0],a=e[1],u=e[2],l=0,p=[];l<c.length;l++)s=c[l],i[s]&&p.push(i[s][0]),i[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,c=1;c<n.length;c++){var a=n[c];0!==i[a]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={app:0},r=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=a;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3e86":function(t,e,n){},4785:function(t,e,n){},"4ee4":function(t,e,n){},5655:function(t,e,n){"use strict";var o=n("86d6"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("AppMenu")],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},t._l(t.buttons,(function(e,o){return n("MenuButton",{key:e.id,attrs:{index:o,button:e},on:{switch:t.switchPage}})})),1)},c=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"menu__button menu__button_list",class:{menu__button_active:t.button.isActive},attrs:{to:t.button.path}},["/"==t.button.path?n("font-awesome-icon",{staticClass:"menu__icon",attrs:{icon:"microphone"},on:{click:t.makeActive}}):t._e(),"/list"==t.button.path?n("font-awesome-icon",{staticClass:"menu__icon",attrs:{icon:"clipboard-list"},on:{click:t.makeActive}}):t._e(),"/speaker"==t.button.path?n("font-awesome-icon",{staticClass:"menu__icon",attrs:{icon:"volume-down"},on:{click:t.makeActive}}):t._e()],1)},u=[],d={name:"MenuButton",props:["button","index"],data:function(){return{socket:""}},methods:{makeActive:function(t){this.$emit("switch",this.index)}},beforeMount:function(){}},l=d,p=(n("f205"),n("2877")),f=Object(p["a"])(l,a,u,!1,null,null,null),h=f.exports,m={name:"AppMenu",components:{MenuButton:h},data:function(){return{buttons:[{path:"/list",isActive:!1},{path:"/",isActive:!1},{path:"/speaker",isActive:!1}]}},methods:{switchPage:function(t){this.buttons=this.buttons.map((function(e,n){return{path:e.path,isActive:n==t}}))}},beforeMount:function(){switch(window.location.pathname){case"/":this.buttons[1].isActive=!0;break;case"/list":this.buttons[0].isActive=!0;break;case"/speaker":this.buttons[2].isActive=!0;break}}},v=m,_=(n("8d74"),Object(p["a"])(v,s,c,!1,null,null,null)),b=_.exports,g={name:"app",components:{AppMenu:b},data:function(){return{}},methods:{}},k=g,w=(n("7c55"),Object(p["a"])(k,i,r,!1,null,null,null)),y=w.exports,C=n("8c4f"),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"microphone-page page"},[n("span",{staticClass:"page-header"},[t._v("Microphone")]),n("MicrophoneButton")],1)},M=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"microphone-button microphone-page__microphone-button"},[n("div",{staticClass:"microphone-button__background",class:{"microphone-button__background_active":t.isActive}},[n("div",{staticClass:"microphone-button__button",on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.switchRecording(e)}}},[n("font-awesome-icon",{staticClass:"microphone-button__icon",attrs:{icon:"microphone"}})],1)])])},R=[],x={name:"MicrophoneButton",data:function(){return{isActive:!1,mediaRecorder:"",audioChunks:[]}},sockets:{connect:function(){console.log("Соединение установлено")}},methods:{switchRecording:function(){this.isActive?this.stopRecording():this.startRecording()},startRecording:function(){this.isActive=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.start(),console.log(this.mediaRecorder),this.mediaRecorder.addEventListener("dataavailable",t=>{this.audioChunks.push(t.data),this.$socket.emit("audioMessage",this.audioChunks)})})},stopRecording:function(){this.isActive=!1,this.mediaRecorder.stop()}}},j=x,L=(n("e8e8"),Object(p["a"])(j,O,R,!1,null,null,null)),$=L.exports,B={name:"Microphone",components:{MicrophoneButton:$},data:function(){return{}}},S=B,E=Object(p["a"])(S,A,M,!1,null,null,null),P=E.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"speaker-page page"},[n("span",{staticClass:"page-header"},[t._v("Records list")]),t.isLoading?n("span",{staticClass:"loading-title speaker-page__loading-title"},[t._v("Загрузка")]):t._e(),n("div",{staticClass:"records-list"},t._l(t.records,(function(e,o){return n("Record",{key:e.id,attrs:{record:e,index:o},on:{switch:t.switchOnOff}})})),1)])},D=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"record records-list__record"},[n("button",{staticClass:"record__play-button",on:{click:t.switchOnOff}},[t.record.isActive?t._e():n("font-awesome-icon",{staticClass:"record__play-button-icon",attrs:{icon:"play"}}),t.record.isActive?n("font-awesome-icon",{staticClass:"record__play-button-icon",attrs:{icon:"pause"}}):t._e()],1),n("div",{staticClass:"record__wrapper"},[n("span",{staticClass:"record__name"},[t._v(t._s(t.record.name)+" ")]),t.record.isActive?n("div",{staticClass:"record__time-line"}):t._e()]),n("span",{staticClass:"record__duration"},[t._v(t._s(t.record.record.duration))])])},T=[],J={name:"Record",props:["record","index"],data:function(){return{}},methods:{switchOnOff:function(){this.record.isActive?this.record.record.pause():this.record.record.play(),this.$emit("switch",this.index)}}},z=J,F=(n("fb34"),Object(p["a"])(z,H,T,!1,null,null,null)),Y=F.exports,q={name:"RecordList",components:{Record:Y},data:function(){return{isLoading:!1,records:[]}},methods:{switchOnOff:function(t){this.records=this.records.map((function(e,n){return{record:e.record,name:e.name,duration:e.duration,isActive:n==t}}))},getRecords:function(){fetch("https://voicy-speaker.herokuapp.com/voices").then(t=>t.json()).then(t=>{console.log(t);let e=t.map((t,e)=>{if(t.audioBlob.length>0){const e=new Blob([new Uint8Array(t.audioBlob[0].data).buffer]);if(e.size>0){const n=URL.createObjectURL(e),o=new Audio(n),i=new Date(t.timeStamp),r=i.getHours()>9?i.getHours():"0"+i.getHours(),s=i.getMinutes()>9?i.getMinutes():"0"+i.getMinutes(),c=i.getSeconds()>9?i.getSeconds():"0"+i.getSeconds(),a=r+":"+s+":"+c,u=i.getDate()>9?i.getDate():"0"+i.getDate(),d=i.getMonth()>9?i.getMonth()+1:"0"+(i.getMonth()+1),l=u+"."+d+"."+i.getFullYear();return{record:o,name:a+"  "+l,duration:o.duration,isActive:!1}}}});this.records=e.filter(t=>void 0!=t).reverse(),this.isLoading=!1})}},beforeMount:function(){this.isLoading=!0,this.getRecords(),this.$emit("changeLoading")}},G=q,I=(n("b09d"),Object(p["a"])(G,U,D,!1,null,null,null)),K=I.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"speaker-page page"},[n("span",{staticClass:"page-header"},[t._v("Speaker")]),n("font-awesome-icon",{staticClass:"speaker-page__background",attrs:{icon:"volume-down"}}),n("p",{staticClass:"speaker-page__paragraph"},[t._v('Open the "Microphone" screen on another device and start recording')])],1)},Q=[],V={data:function(){return{record:""}},sockets:{connect:function(){console.log("Соединение установлено")}},beforeMount:function(){this.sockets.subscribe("audioMessage",(function(t){const e=new Blob(t),n=URL.createObjectURL(e);this.record=new Audio(n),this.record.play()}))},deactivated:function(){this.record.pause()}},W=V,X=(n("5655"),Object(p["a"])(W,N,Q,!1,null,null,null)),Z=X.exports;o["a"].use(C["a"]);var tt=new C["a"]({mode:"history",routes:[{path:"/",component:P},{path:"/list",component:K},{path:"/speaker",component:Z}]}),et=n("5132"),nt=n.n(et),ot=(n("3e86"),n("945b"),n("ecee")),it=n("c074"),rt=n("ad3d");ot["c"].add(it["e"],it["d"],it["c"],it["b"],it["a"]),o["a"].component("font-awesome-icon",rt["a"]),o["a"].config.productionTip=!1,o["a"].use(new nt.a({debug:!1,connection:"https://voicy-speaker.herokuapp.com"})),new o["a"]({router:tt,render:function(t){return t(y)}}).$mount("#app")},"5c48":function(t,e,n){},"77c0":function(t,e,n){},"7c55":function(t,e,n){"use strict";var o=n("5c48"),i=n.n(o);i.a},"7e58":function(t,e,n){},"86d6":function(t,e,n){},"8d74":function(t,e,n){"use strict";var o=n("4ee4"),i=n.n(o);i.a},"945b":function(t,e,n){},aa9c:function(t,e,n){},b09d:function(t,e,n){"use strict";var o=n("7e58"),i=n.n(o);i.a},e8e8:function(t,e,n){"use strict";var o=n("aa9c"),i=n.n(o);i.a},f205:function(t,e,n){"use strict";var o=n("77c0"),i=n.n(o);i.a},fb34:function(t,e,n){"use strict";var o=n("4785"),i=n.n(o);i.a}});
//# sourceMappingURL=app.aa8d57bc.js.map